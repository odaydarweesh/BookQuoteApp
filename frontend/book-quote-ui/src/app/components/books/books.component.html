<div class="books-container">
    <nav class="navbar">
        <h1>üìö Books Management</h1>
        <div class="nav-actions">
            <button routerLink="/quotes" class="btn-secondary">Quotes</button>
            <button (click)="logout()" class="btn-logout">Logout</button>

        </div>
    </nav>

    <div class="content">
        <!-- Loading spinner -->
        <div *ngIf="isLoading" class="loading-overlay">
            <div class="spinner"></div>
            <p>Loading books...</p>
        </div>

        <div class="header">
            <button (click)="toggleForm()" class="btn-primary">
                {{ showForm ? 'Cancel' : '+ Add New Book' }}
            </button>
        </div>

        <div *ngIf="showForm" class="form-card">
            <h2>{{ editMode ? 'Edit Book' : 'New Book' }}</h2>
            <form (ngSubmit)="onSubmit()">
                <div class="form-group">
                    <label>Book Title</label>
                    <input type="text" [(ngModel)]="bookForm.title" name="title" required class="form-control">
                </div>

                <div class="form-group">
                    <label>Author</label>
                    <input type="text" [(ngModel)]="bookForm.author" name="author" required class="form-control">
                </div>

                <div class="form-group">
                    <label>Published Date</label>
                    <input type="date" [(ngModel)]="bookForm.publishedDate" name="publishedDate" required
                        class="form-control">
                </div>

                <button type="submit" class="btn-primary">
                    {{ editMode ? 'Save Changes' : 'Add Book' }}
                </button>
            </form>
        </div>

        <div class="books-grid">
            <div *ngFor="let book of books" class="book-card">
                <h3>{{ book.title }}</h3>
                <p class="author">‚úçÔ∏è {{ book.author }}</p>
                <p class="date">üìÖ {{ book.publishedDate | date:'yyyy-MM-dd' }}</p>
                <div class="actions">
                    <button (click)="editBook(book)" class="btn-edit">Edit</button>
                    <button (click)="deleteBook(book.id)" class="btn-delete">Delete</button>
                </div>
            </div>
        </div>

        <div *ngIf="books.length === 0 && !isLoading" class="empty-state">
            <p>üìö No books yet. Start by adding a new book!</p>
        </div>


        <section class="details-table-section" *ngIf="books && books.length">
            <h2>Books Details</h2>
            <table class="details-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Published Date</th>
                        <th>Created At</th>
                        <th>Last Updated</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let book of books; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ book.title }}</td>
                        <td>{{ book.author }}</td>
                        <td>{{ book.publishedDate | date:'yyyy-MM-dd' }}</td>
                        <td>{{ book.createdAt | date:'yyyy-MM-dd HH:mm' }}</td>
                        <td>{{ book.updatedAt | date:'yyyy-MM-dd HH:mm' }}</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>
</div>